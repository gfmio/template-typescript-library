# Taskfile configuration
# Path: tasks/logical/bench.yml

version: "3"
tasks:
  bench:
    desc: Run benchmarks
    aliases:
      - benchmark
    cmds:
      - task: tools-vitest:vitest:bench
  bench:watch:
    desc: Run benchmarks in watch mode
    aliases:
      - benchmark:watch
    cmds:
      - task: tools-vitest:vitest:bench:watch
    watch: true
  bench:compare:
    desc: Compare benchmark results with baseline
    cmds:
      - task: bench
      - bun run scripts/compare-benchmarks.ts
  bench:baseline:
    desc: Set current benchmark results as baseline
    cmds:
      - task: bench
      - cp benchmarks/results.json benchmarks/baseline.json
      - echo "âœ“ Baseline updated"
  bench:compare:threshold:
    desc: Compare benchmarks with custom threshold (usage - task bench:compare:threshold -- --threshold 15)
    cmds:
      - task: bench
      - bun run scripts/compare-benchmarks.ts {{.CLI_ARGS}}
